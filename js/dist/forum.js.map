{"version":3,"sources":["webpack://@v17development/flarum-blog/webpack/bootstrap","webpack://@v17development/flarum-blog/./forum.js","webpack://@v17development/flarum-blog/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@v17development/flarum-blog/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@v17development/flarum-blog/./src/common/Models/BlogMeta.js","webpack://@v17development/flarum-blog/./src/forum/compat.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogCategories.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogItemSidebar/BlogAuthor.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogItemSidebar/BlogItemSidebar.js","webpack://@v17development/flarum-blog/./src/forum/components/BlogPostController.js","webpack://@v17development/flarum-blog/./src/forum/components/Composer/Composer.js","webpack://@v17development/flarum-blog/./src/forum/components/Composer/ComposerPreview.js","webpack://@v17development/flarum-blog/./src/forum/components/ForumNav.js","webpack://@v17development/flarum-blog/./src/forum/components/LanguageDropdown/Language.js","webpack://@v17development/flarum-blog/./src/forum/components/LanguageDropdown/LanguageDropdown.js","webpack://@v17development/flarum-blog/./src/forum/components/Modals/BlogPostSettingsModal.js","webpack://@v17development/flarum-blog/./src/forum/components/Modals/RenameArticleModal.js","webpack://@v17development/flarum-blog/./src/forum/index.js","webpack://@v17development/flarum-blog/./src/forum/pages/BlogComposer.js","webpack://@v17development/flarum-blog/./src/forum/pages/BlogItem.js","webpack://@v17development/flarum-blog/./src/forum/pages/BlogOverview.js","webpack://@v17development/flarum-blog/./src/forum/utils/addSidebarNav.js","webpack://@v17development/flarum-blog/./src/forum/utils/discussionRouting.js","webpack://@v17development/flarum-blog/./src/forum/utils/extendTagOverview.js","webpack://@v17development/flarum-blog/./src/forum/utils/redirector.js","webpack://@v17development/flarum-blog/./src/forum/utils/tooltip.js","webpack://@v17development/flarum-blog/external \"flarum.core\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['Component']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['Model']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Alert']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Button']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/CommentPost']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/ComposerBody']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/DiscussionPage']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Dropdown']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/EditPostComposer']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/IndexPage']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Link']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/LinkButton']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Modal']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Page']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/PostStream']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/SelectDropdown']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/Switch']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['components/TextEditor']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['extend']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['helpers/avatar']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['helpers/humanTime']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['helpers/listItems']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['models/Discussion']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['states/PostStreamState']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['tags/components/TagDiscussionModal']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['tags/components/TagsPage']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/DiscussionControls']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/ItemList']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/Stream']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/extractText']\"","webpack://@v17development/flarum-blog/external \"flarum.core.compat['utils/mixin']\""],"names":["BlogMeta","mixin","Model","discussion","hasOne","featuredImage","attribute","summary","isFeatured","isSized","isPendingReview","compat","BlogItemSidebar","BlogAuthor","BlogCategories","oninit","vnode","blogCategories","app","forum","view","translator","trans","map","tagId","tag","store","getById","tags","push","categoryItem","all","forEach","_tag","isChild","parent","id","route","slug","icon","backgroundColor","color","name","Component","author","attrs","loading","article","user","avatar","displayName","bio","listItems","items","toArray","ItemList","className","itemlist","add","component","ForumNav","BlogPostController","init","loadedPost","buttons","LanguageDiscussionModal","flarum","extensions","components","canRename","Button","onclick","modal","show","RenameArticleModal","articlePost","firstPost","firstPostId","disabled","canEdit","composer","load","EditPostComposer","post","BlogPostSettingsModal","canTag","TagDiscussionModal","blogMeta","save","then","alerts","Alert","type","response","handleErrors","canChangeLanguage","canLock","DiscussionControls","lockAction","bind","isLocked","canHide","isHidden","restoreAction","canDelete","confirm","extractText","history","getCurrent","previous","back","m","set","redraw","hideAction","Dropdown","label","buttonClassName","menuClassName","onshow","find","Composer","previewContent","hasContent","fields","content","TextEditor","submitLabel","placeholder","preview","jumpToPreview","onchange","onsubmit","value","ComposerBody","ComposerPreview","oncreate","s9e","TextFormatter","dom","navItems","IndexPage","prototype","screen","remove","Language","languages","options","reduce","o","lang","code","extra","language","uppercase","toUpperCase","LanguageDropdown","selected","Object","keys","key","isSelected","active","meta","createRecord","isNew","exists","Stream","formUpload","title","success","$","val","isLoading","isSuccess","link","data","console","log","setTimeout","error","isError","alert","e","files","prop","length","upload","file","formData","FormData","append","ajax","url","headers","Authorization","cache","contentType","processData","maxWidth","minWidth","width","minHeight","marginTop","Switch","state","fontWeight","submitData","relationships","isComposer","preventDefault","pushData","attributes","hide","Modal","redirect","onChange","window","replaceState","document","initializers","routes","blog","path","BlogOverview","blogCategory","blogComposer","BlogComposer","blogArticle","BlogItem","models","Discussion","redirector","extendTagOverview","discussionRouting","addSidebarNav","setTitle","bodyClass","articleLanguage","param","locale","tagList","Array","isArray","split","foundTag","isSaving","openTagsModal","selectedTags","openNameArticleModal","openBlogSettings","blogImage","backgroundImage","cursor","create","marginRight","session","blogTags","findblogTags","filter","indexOf","getBy","Page","near","found","relatedArticles","loadBlogItem","preloadBlogOverview","preloadedApiDocument","getRelatedArticles","q","sort","articles","relatedArticle","Math","random","slice","getArticleDefaultImage","defaultImage","includedPosts","payload","included","articleId","record","a","b","stream","PostStreamState","goToNumber","canEditArticle","matches","opacity","fontSize","commentCount","PostStream","onPositionChange","positionChanged","blogTag","isSticky","tooltip","humanTime","createdAt","startNumber","endNumber","lastReadPostNumber","featuredPosts","posts","hasMore","isLoadingMore","currentSelectedLanguage","loadBlogOverview","reloadData","links","next","loadMore","replace","newArticle","location","pathname","clear","foundMainTag","currentCategory","join","undefined","extend","original_discussion_route","discussionRedirectEnabled","shouldRedirect","foundTags","TagsPage","markup","knowledgeBaseTags","tag_tiles","children","tile","i","currentTag","tagRedirectEnabled","override","DiscussionPage","original","element"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import Model from \"flarum/Model\";\nimport mixin from \"flarum/utils/mixin\";\n\nexport default class BlogMeta extends mixin(Model, {\n  discussion: Model.hasOne(\"discussion\"),\n  featuredImage: Model.attribute(\"featuredImage\"),\n  summary: Model.attribute(\"summary\"),\n  isFeatured: Model.attribute(\"isFeatured\"),\n  isSized: Model.attribute(\"isSized\"),\n  isPendingReview: Model.attribute(\"isPendingReview\"),\n}) {}\n","import { compat } from \"@flarum/core/forum\";\nimport BlogAuthor from \"./components/BlogItemSidebar/BlogAuthor\";\nimport BlogItemSidebar from \"./components/BlogItemSidebar/BlogItemSidebar\";\n\nexport default () => {\n  Object.assign(compat, {\n    \"v17development/blog/components/BlogItemSidebar\": BlogItemSidebar,\n    \"v17development/blog/components/BlogAuthor\": BlogAuthor,\n  });\n};\n","import Component from \"flarum/Component\";\nimport Link from \"flarum/components/Link\";\n\nexport default class BlogCategories extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.blogCategories = app.forum.attribute(\"blogTags\");\n  }\n\n  view() {\n    return (\n      <div className=\"BlogCategories BlogSideWidget\">\n        <h3>\n          {app.translator.trans(\"v17development-flarum-blog.forum.categories\")}\n        </h3>\n\n        {this.blogCategories &&\n          this.blogCategories.map((tagId) => {\n            const tag = app.store.getById(\"tags\", tagId);\n\n            if (!tag) return null;\n\n            const tags = [];\n\n            // Add tag\n            tags.push(this.categoryItem(tag));\n\n            // Add tags\n            app.store.all(\"tags\").forEach((_tag) => {\n              if (_tag.isChild() && _tag.parent().id() === tag.id()) {\n                tags.push(this.categoryItem(_tag));\n              }\n            });\n\n            return tags;\n          })}\n      </div>\n    );\n  }\n\n  // Category item\n  categoryItem(tag) {\n    return (\n      <Link\n        href={app.route(\"blogCategory\", { slug: tag.slug() })}\n        className={`BlogSideWidget-item BlogSideWidget-item-${tag.id()} ${\n          tag.isChild() && app.forum.attribute(\"blogCategoryHierarchy\") == true\n            ? \"BlogSideWidget-item-child\"\n            : \"\"\n        }`}\n      >\n        <span\n          className={tag.icon() === \"\" ? \"BlogSideWidget-item-colored\" : \"\"}\n          style={{ backgroundColor: tag.icon() === \"\" ? tag.color() : null }}\n        >\n          <i className={tag.icon()} />\n        </span>\n        {tag.name()}\n      </Link>\n    );\n  }\n}\n","import Component from \"flarum/Component\";\nimport ItemList from \"flarum/utils/ItemList\";\nimport listItems from \"flarum/helpers/listItems\";\nimport avatar from \"flarum/helpers/avatar\";\n\nexport default class BlogAuthor extends Component {\n  view() {\n    const author = !this.attrs.loading\n      ? this.attrs.article\n        ? this.attrs.article.user()\n        : this.attrs.user\n      : null;\n\n    return (\n      <div className={\"FlarumBlog-Article-Author\"}>\n        <div\n          className={`FlarumBlog-Article-Author-background ${\n            this.attrs.loading ? \"FlarumBlog-Author-Ghost\" : \"\"\n          }`}\n          style={{\n            backgroundColor: author && author.color() ? author.color() : null,\n          }}\n        />\n\n        <div className={\"FlarumBlog-Article-Author-Avatar\"}>\n          {author ? (\n            avatar(author)\n          ) : (\n            <span className={\"Avatar FlarumBlog-Author-Ghost\"} />\n          )}\n        </div>\n\n        {author && (\n          <div className={\"FlarumBlog-Article-Author-Info\"}>\n            <span className={\"FlarumBlog-Article-Author-Name\"}>\n              {author.displayName()}\n            </span>\n            <p className={\"FlarumBlog-Article-Author-Bio\"}>\n              {author.bio && author.bio()}\n            </p>\n\n            <ul className={\"FlarumBlog-Article-Author-Extended\"}>\n              {listItems(this.items().toArray())}\n            </ul>\n          </div>\n        )}\n\n        {this.attrs.loading && (\n          <div>\n            <span\n              className={\n                \"FlarumBlog-Article-Author-Name FlarumBlog-Author-Ghost\"\n              }\n            >\n              &nbsp;\n            </span>\n            <p\n              className={\n                \"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"\n              }\n            >\n              &nbsp;\n            </p>\n            <p\n              className={\n                \"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"\n              }\n            >\n              &nbsp;\n            </p>\n            <p\n              className={\n                \"FlarumBlog-Article-Author-Bio FlarumBlog-Author-Ghost\"\n              }\n            >\n              &nbsp;\n            </p>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  items() {\n    return new ItemList();\n  }\n}\n","import Component from \"flarum/Component\";\nimport ItemList from \"flarum/utils/ItemList\";\nimport listItems from \"flarum/helpers/listItems\";\nimport BlogAuthor from \"./BlogAuthor\";\nimport BlogCategories from \"../BlogCategories\";\nimport ForumNav from \"../ForumNav\";\n\nexport default class BlogItemSidebar extends Component {\n  view() {\n    return (\n      <div className={`FlarumBlog-Article-Sidebar ${this.attrs.className}`}>\n        <ul>{listItems(this.items().toArray())}</ul>\n      </div>\n    );\n  }\n\n  items() {\n    const itemlist = new ItemList();\n\n    itemlist.add(\"author\", BlogAuthor.component(this.attrs), 0);\n\n    itemlist.add(\"categories\", BlogCategories.component(this.attrs), 0);\n\n    itemlist.add(\"nav\", ForumNav.component(this.attrs), 0);\n\n    return itemlist;\n  }\n}\n","import Component from \"flarum/Component\";\nimport TagDiscussionModal from \"flarum/tags/components/TagDiscussionModal\";\nimport DiscussionControls from \"flarum/utils/DiscussionControls\";\nimport Alert from \"flarum/components/Alert\";\nimport Button from \"flarum/components/Button\";\nimport Dropdown from \"flarum/components/Dropdown\";\nimport BlogPostSettingsModal from \"./Modals/BlogPostSettingsModal\";\nimport EditPostComposer from \"flarum/components/EditPostComposer\";\nimport extractText from \"flarum/utils/extractText\";\nimport RenameArticleModal from \"./Modals/RenameArticleModal\";\n\nexport default class BlogPostController extends Component {\n  init() {\n    this.loadedPost = false;\n  }\n\n  view() {\n    const article = this.attrs.article;\n    let buttons = [];\n\n    // Working for GlowingBlue version\n    const LanguageDiscussionModal =\n      flarum.extensions[\"fof-discussion-language\"] &&\n      typeof flarum.extensions[\"fof-discussion-language\"].components !==\n        \"undefined\"\n        ? flarum.extensions[\"fof-discussion-language\"].components\n            .LanguageDiscussionModal\n        : null;\n\n    // Rename article\n    if (article.canRename()) {\n      buttons.push(\n        Button.component(\n          {\n            className: \"Button\",\n            onclick: () => app.modal.show(RenameArticleModal, { article }),\n            icon: \"fas fa-pencil-alt\",\n          },\n          app.translator.trans(\n            \"v17development-flarum-blog.forum.tools.rename_article\"\n          )\n        )\n      );\n    }\n\n    const articlePost = article.firstPost()\n      ? article.firstPost()\n      : app.store.getById(\"posts\", article.firstPostId());\n\n    // Edit article\n    buttons.push(\n      Button.component(\n        {\n          className: \"Button\",\n          disabled: !articlePost || !articlePost.canEdit(),\n          onclick: () => {\n            app.composer.load(EditPostComposer, { post: articlePost });\n            app.composer.show();\n          },\n          icon: \"fas fa-edit\",\n        },\n        app.translator.trans(\n          \"v17development-flarum-blog.forum.tools.edit_article\"\n        )\n      )\n    );\n\n    // Article settings\n    buttons.push(\n      Button.component(\n        {\n          className: \"Button\",\n          onclick: () => app.modal.show(BlogPostSettingsModal, { article }),\n          icon: \"fas fa-cogs\",\n        },\n        app.translator.trans(\n          \"v17development-flarum-blog.forum.tools.article_settings\"\n        )\n      )\n    );\n\n    // Update categories\n    if (article.canTag()) {\n      buttons.push(\n        Button.component(\n          {\n            className: \"Button\",\n            onclick: () =>\n              app.modal.show(TagDiscussionModal, { discussion: article }),\n            icon: \"fas fa-tag\",\n          },\n          app.translator.trans(\n            \"v17development-flarum-blog.forum.tools.update_category\"\n          )\n        )\n      );\n    }\n\n    // Approve article\n    if (article.blogMeta() && article.blogMeta().isPendingReview()) {\n      buttons.push(<li className=\"Dropdown-separator\" />);\n\n      buttons.push(\n        Button.component(\n          {\n            className: \"Button\",\n            disabled: !app.forum.attribute(\"canApproveBlogPosts\"),\n            onclick: () => {\n              article\n                .blogMeta()\n                .save({\n                  isPendingReview: false,\n                })\n                .then(\n                  () => {\n                    app.alerts.show(\n                      Alert,\n                      { type: \"success\" },\n                      app.translator.trans(\n                        \"v17development-flarum-blog.forum.review_article.approve_article_approved\"\n                      )\n                    );\n                  },\n                  (response) => {\n                    this.loading = false;\n                    this.handleErrors(response);\n                  }\n                );\n            },\n            icon: \"fas fa-thumbs-up\",\n          },\n          app.translator.trans(\n            \"v17development-flarum-blog.forum.review_article.approve_article\"\n          )\n        )\n      );\n    }\n\n    // Language\n    if (\n      article.canChangeLanguage &&\n      article.canChangeLanguage() &&\n      LanguageDiscussionModal\n    ) {\n      buttons.push(\n        Button.component(\n          {\n            icon: \"fas fa-globe\",\n            onclick: () =>\n              app.modal.show(LanguageDiscussionModal, { discussion: article }),\n          },\n          app.translator.trans(\n            \"fof-discussion-language.forum.discussion_controls.change_language_button\"\n          )\n        )\n      );\n    }\n\n    buttons.push(<li className=\"Dropdown-separator\" />);\n\n    // Lock article\n    if (article.canLock()) {\n      buttons.push(\n        Button.component(\n          {\n            className: \"Button\",\n            onclick: DiscussionControls.lockAction.bind(article),\n            icon: `fas ${\n              article.isLocked() ? \"fa-comments\" : \"fa-comment-slash\"\n            }`,\n          },\n          article.isLocked()\n            ? app.translator.trans(\n                \"v17development-flarum-blog.forum.tools.enable_comments\"\n              )\n            : app.translator.trans(\n                \"v17development-flarum-blog.forum.tools.disable_comments\"\n              )\n        )\n      );\n    }\n\n    // Hide/show/delete\n    if (article.canHide()) {\n      // Article is hidden\n      if (article.isHidden()) {\n        // Recover article\n        buttons.push(\n          Button.component(\n            {\n              className: \"Button\",\n              onclick: DiscussionControls.restoreAction.bind(article),\n              icon: \"fas fa-eye\",\n            },\n            app.translator.trans(\n              \"v17development-flarum-blog.forum.tools.recover_article\"\n            )\n          )\n        );\n\n        // Delete article\n        if (article.canDelete()) {\n          buttons.push(\n            Button.component(\n              {\n                className: \"Button\",\n                onclick: () => {\n                  // Confirm deletion\n                  if (\n                    confirm(\n                      extractText(\n                        app.translator.trans(\n                          \"core.forum.discussion_controls.delete_confirmation\"\n                        )\n                      )\n                    )\n                  ) {\n                    // Redirect if the current page is an blog article\n                    if (app.history.getCurrent().name === \"blogArticle\") {\n                      if (app.previous) {\n                        app.history.back();\n                      } else {\n                        m.route.set(app.route(\"blog\"));\n                      }\n                    }\n\n                    return article.delete().then(() => {\n                      m.redraw();\n                    });\n                  }\n                },\n                icon: \"far fa-trash-alt\",\n              },\n              app.translator.trans(\n                \"v17development-flarum-blog.forum.tools.delete_forever\"\n              )\n            )\n          );\n        }\n      } else {\n        // Hide article\n        buttons.push(\n          Button.component(\n            {\n              className: \"Button\",\n              onclick: DiscussionControls.hideAction.bind(article),\n              icon: \"fas fa-trash\",\n            },\n            app.translator.trans(\n              \"v17development-flarum-blog.forum.tools.hide_article\"\n            )\n          )\n        );\n      }\n    }\n\n    return (\n      <div className={\"FlarumBlog-Article-Content-Edit-Button\"}>\n        <div className={\"FlarumBlog-Article-Content-Edit-Dropdown\"}>\n          {Dropdown.component(\n            {\n              icon: \"fas fa-cog\",\n              label: \"Manage\",\n              buttonClassName: \"Button\",\n              menuClassName: \"Dropdown-menu--right\",\n              onshow: () => {\n                // Get post data to make sure they can edit the post\n                if (articlePost && !articlePost.canEdit() && !this.loadedPost) {\n                  this.loadedPost = true;\n                  app.store\n                    .find(\n                      \"posts\",\n                      article.firstPost()\n                        ? article.firstPost().id()\n                        : article.firstPostId()\n                    )\n                    .then(() => {})\n                    .catch(() => {})\n                    .then(() => m.redraw());\n                }\n              },\n            },\n            buttons\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","import ComposerBody from \"flarum/components/ComposerBody\";\nimport Button from \"flarum/components/Button\";\nimport TextEditor from \"flarum/components/TextEditor\";\nimport ComposerPreview from \"./ComposerPreview\";\n\nexport default class Composer extends ComposerBody {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.previewContent = false;\n  }\n\n  // Render\n  view() {\n    const hasContent =\n      this.composer.fields.content() && this.composer.fields.content() !== \"\";\n    const loading = this.loading || this.attrs.disabled;\n\n    return (\n      <div\n        className={`Flarum-Blog-Composer ${\n          loading ? \"Flarum-Blog-Composer-Loading\" : \"\"\n        }`}\n      >\n        <div className={\"Flarum-Blog-Composer-tabs\"}>\n          <Button\n            className={!this.previewContent && \"AricleComposerButtonSelected\"}\n            onclick={() => (this.previewContent = false)}\n          >\n            {app.translator.trans(\n              \"v17development-flarum-blog.forum.composer.write\"\n            )}\n          </Button>\n          <Button\n            className={this.previewContent && \"AricleComposerButtonSelected\"}\n            onclick={() => (this.previewContent = true)}\n          >\n            {app.translator.trans(\n              \"v17development-flarum-blog.forum.composer.view\"\n            )}\n          </Button>\n        </div>\n\n        <div\n          className={`Composer Flarum-Blog-Composer-body ${\n            this.previewContent ? \"Flarum-Blog-Composer-HideEditor\" : \"\"\n          }`}\n        >\n          {this.previewContent && (\n            <div className={\"Flarum-Blog-Composer-preview\"}>\n              {!hasContent &&\n                app.translator.trans(\n                  \"v17development-flarum-blog.forum.composer.nothing_to_preview\"\n                )}\n\n              <ComposerPreview content={this.composer.fields.content()} />\n            </div>\n          )}\n\n          {TextEditor.component({\n            submitLabel:\n              this.attrs.submitLabel ||\n              app.translator.trans(\"core.forum.composer_edit.submit_button\"),\n            placeholder: this.attrs.placeholder,\n            disabled: loading,\n            composer: this.composer,\n            preview: this.jumpToPreview && this.jumpToPreview.bind(this),\n            onchange: this.composer.fields.content,\n            onsubmit: this.onsubmit.bind(this),\n            value: this.composer.fields.content(),\n          })}\n        </div>\n      </div>\n    );\n  }\n\n  // Submit trigger\n  onsubmit() {\n    if (this.attrs.onsubmit) {\n      this.attrs.onsubmit();\n    }\n  }\n}\n","import Component from \"flarum/Component\";\n\nexport default class ComposerPreview extends Component {\n  view() {\n    return <div />;\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    s9e.TextFormatter.preview(vnode.attrs.content || \"\", vnode.dom);\n  }\n}\n","import Component from \"flarum/Component\";\nimport IndexPage from \"flarum/components/IndexPage\";\nimport SelectDropdown from \"flarum/components/SelectDropdown\";\n\nexport default class ForumNav extends Component {\n  view() {\n    return (\n      <div className=\"BlogForumNav BlogSideWidget\">\n        <h3>\n          {app.translator.trans(\"v17development-flarum-blog.forum.forum_nav\")}\n        </h3>\n        <nav className=\"IndexPage-nav sideNav\">\n          <SelectDropdown buttonClassName=\"Button\" className=\"App-titleControl\">\n            {this.navItems().toArray()}\n          </SelectDropdown>\n        </nav>\n      </div>\n    );\n  }\n\n  navItems() {\n    const items = IndexPage.prototype.navItems();\n\n    // We want the active screen to show up in the top dropdown when on mobile.\n    if (app.screen() !== \"phone\") {\n      items.remove(\"blog\");\n    }\n\n    return items;\n  }\n}\n","import Component from \"flarum/Component\";\n\nexport default class Language extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.languages = app.store.all(\"discussion-languages\");\n    this.options = this.languages.reduce((o, lang) => {\n      o[lang.code()] = (\n        <span>\n          <i className={\"fas fa-globe\"} /> {lang.name()}\n        </span>\n      );\n\n      return o;\n    }, this.attrs.extra || {});\n  }\n\n  view() {\n    const { language, uppercase } = this.attrs;\n    const name = language.name() || \"\";\n\n    return (\n      <span>\n        <i className={\"fas fa-globe\"} />\n        &nbsp;\n        {uppercase ? name.toUpperCase() : name}\n      </span>\n    );\n  }\n}\n","import Component from \"flarum/Component\";\nimport Dropdown from \"flarum/components/Dropdown\";\nimport Button from \"flarum/components/Button\";\nimport Language from \"./Language\";\n\nexport default class LanguageDropdown extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.languages = app.store.all(\"discussion-languages\");\n    this.options = this.languages.reduce((o, lang) => {\n      o[lang.code()] = <Language language={lang} />;\n\n      return o;\n    }, this.attrs.extra || {});\n  }\n\n  view() {\n    const selected = this.attrs.selected;\n\n    const items = Object.keys(this.options).map((key) => {\n      const isSelected = selected || \"any\";\n      const active = key === isSelected;\n\n      return Button.component(\n        {\n          active,\n          icon: active ? \"fas fa-check\" : true,\n          onclick: () => this.attrs.onclick(key),\n        },\n        this.options[key]\n      );\n    });\n\n    return Dropdown.component(\n      {\n        buttonClassName: \"Button\",\n        label: this.options[selected] || this.options[this.attrs.default],\n        menuClassName: \"Dropdown-menu--right\",\n      },\n      items\n    );\n  }\n}\n","import Modal from \"flarum/components/Modal\";\nimport Button from \"flarum/components/Button\";\nimport ItemList from \"flarum/utils/ItemList\";\nimport Stream from \"flarum/utils/Stream\";\nimport Switch from \"flarum/components/Switch\";\n\nexport default class BlogPostSettingsModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    if (this.attrs.article) {\n      this.meta =\n        this.attrs.article && this.attrs.article.blogMeta()\n          ? this.attrs.article.blogMeta()\n          : app.store.createRecord(\"blogMeta\");\n    } else {\n      this.meta = this.attrs.meta ? this.attrs.meta : app.store.createRecord(\"blogMeta\");\n    }\n\n    this.isNew = !this.meta.exists;\n\n    this.summary = Stream(this.meta.summary() || \"\");\n\n    this.featuredImage = Stream(this.meta.featuredImage() || \"\");\n\n    this.isFeatured = Stream(this.meta.isFeatured() || false);\n    this.isSized = Stream(this.meta.isSized() || false);\n    this.isPendingReview = Stream(this.meta.isPendingReview() || false);\n    this.formUpload = this.formUpload.bind(this);\n  }\n\n  className() {\n    return \"Modal--small Support-Modal\";\n  }\n\n  title() {\n    return \"Blog post settings\";\n  }\n\n  success(response) {\n    this.$(\"input\").val(\"\");\n\n    this.isLoading = false;\n    this.isSuccess = true;\n    m.redraw();\n\n    const link = response.data.link;\n\n    console.log(\"link\", link);\n\n    this.featuredImage(link)\n\n\n    // let stringToInject = this.buildEmbedCode(response.data.link, response.data.width > 1024);\n\n    // this.attrs.editor.insertAtCursor(stringToInject);\n\n    // After a bit, re-enable upload\n    setTimeout(() => {\n      console.log(\"featuredImage\",this.featuredImage())\n      this.isSuccess = false;\n      m.redraw();\n    }, 2000);\n  }\n\n  error(response) {\n    this.isLoading = false;\n    this.isError = true;\n    m.redraw();\n\n    // Output the error to the console, for debugging purposes\n    console.error(response);\n\n    alert(\"Error occured while uploading the image, please check your internet connection.\")\n\n    // After a bit, re-enable upload\n    setTimeout(() => {\n      this.isError = false;\n      m.redraw();\n    }, 2000);\n  }\n\n  formUpload(e) {\n    const files = this.$(\"input\").prop(\"files\");\n\n    if (files.length === 0) {\n      return;\n    }\n    this.upload(files[0]);\n  }\n\n  upload(file) {\n    this.isError = false;\n    this.isLoading = true;\n    m.redraw();\n\n    const formData = new FormData();\n    formData.append(\"image\", file);\n\n    $.ajax({\n      url: \"https://api.imgur.com/3/image\",\n      headers: {\n        Authorization: \"Client-ID \" + app.forum.attribute(\"imgur-upload.client-id\"),\n      },\n      type: \"POST\",\n      data: formData,\n      cache: false,\n      contentType: false,\n      processData: false,\n      success: this.success.bind(this),\n      error: this.error.bind(this),\n    });\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form\">{this.fields().toArray()}</div>\n      </div>\n    );\n  }\n\n  fields() {\n    const items = new ItemList();\n\n    items.add(\n      \"summary\",\n      <div className=\"Form-group\">\n        <label>Article summary:</label>\n        <textarea\n          className=\"FormControl\"\n          style={{\n            maxWidth: \"100%\",\n            minWidth: \"100%\",\n            width: \"100%\",\n            minHeight: \"120px\",\n          }}\n          bidi={this.summary}\n          placeholder={\"Please enter a summary\"}\n        />\n\n        <small>\n          This summary will be visible on the blog overview page and will be used for SEO purposes.\n        </small>\n      </div>,\n      30\n    );\n\n    items.add(\n      \"image\",\n      <div className=\"Form-group\">\n        <label>Article Image:</label>\n\n        <input accept=\"image/*\" type=\"file\" className=\"FormControl\" onchange={this.formUpload} />\n        <input\n          id=\"articleImageURl\"\n          type=\"text\"\n          className=\"d-none\"\n          bidi={this.featuredImage}\n          placeholder={\"https://\"}\n        />\n\n        <small>Best image resolution for social media: 1200x630</small>\n\n        {this.featuredImage() != \"\" && (\n          <img\n            src={this.featuredImage()}\n            alt={\"Article image\"}\n            title={\"Blog post image\"}\n            width={\"100%\"}\n            style={{ marginTop: \"15px\" }}\n          />\n        )}\n      </div>,\n      30\n    );\n\n    items.add(\n      \"sized\",\n      <div className=\"Form-group\">\n        {Switch.component(\n          {\n            state: this.isSized() == true,\n            onchange: (val) => {\n              this.isSized(val);\n            },\n          },\n          [\n            <b>Highlighted post</b>,\n            <div className=\"helpText\" style={{ fontWeight: 500 }}>\n              Give this post a big image on the blog overview page.\n            </div>,\n          ]\n        )}\n      </div>,\n      -10\n    );\n\n    items.add(\n      \"submit\",\n      <div className=\"Form-group\">\n        {Button.component(\n          {\n            type: \"submit\",\n            className: \"Button Button--primary SupportModal-save\",\n            loading: this.loading || this.isError || this.isLoading,\n          },\n          \"Update\"\n        )}\n      </div>,\n      -10\n    );\n\n    return items;\n  }\n\n  submitData() {\n    return {\n      summary: this.summary(),\n      featuredImage: this.featuredImage(),\n      isFeatured: this.isFeatured(),\n      isSized: this.isSized(),\n      isPendingReview: this.isPendingReview(),\n      relationships:\n        this.isNew && !this.attrs.isComposer\n          ? {\n              discussion: this.attrs.article,\n            }\n          : null,\n    };\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    // Submit data\n    if (this.attrs.onsubmit) {\n      // Update attributes\n      this.meta.pushData({\n        attributes: this.submitData(),\n      });\n\n      // Push\n      this.attrs.onsubmit(this.meta);\n\n      this.hide();\n      return;\n    }\n\n    this.loading = true;\n\n    this.meta.save(this.submitData()).then(\n      () => {\n        if (this.attrs.article) {\n          this.attrs.article.pushData({\n            relationships: {\n              blogMeta: this.meta,\n            },\n          });\n        }\n\n        this.hide();\n        m.redraw();\n      },\n      (response) => {\n        this.loading = false;\n        this.handleErrors(response);\n      }\n    );\n  }\n}\n","import Modal from \"flarum/components/Modal\";\nimport Button from \"flarum/components/Button\";\nimport ItemList from \"flarum/utils/ItemList\";\nimport Stream from \"flarum/utils/Stream\";\n\nexport default class RenameArticleModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.article = this.attrs.article;\n\n    this.name = Stream(this.article.title() || \"\");\n\n    this.redirect = this.attrs.redirect;\n  }\n\n  className() {\n    return \"Modal--small Support-Modal\";\n  }\n\n  title() {\n    return app.translator.trans(\n      \"v17development-flarum-blog.forum.tools.rename_article\"\n    );\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form\">{this.fields().toArray()}</div>\n      </div>\n    );\n  }\n\n  fields() {\n    const items = new ItemList();\n\n    items.add(\n      \"name\",\n      <div className=\"Form-group\">\n        <label>\n          {app.translator.trans(\n            \"v17development-flarum-blog.forum.article.title\"\n          )}\n          :\n        </label>\n        <input\n          className=\"FormControl\"\n          placeholder={app.translator.trans(\n            \"v17development-flarum-blog.forum.article.title\"\n          )}\n          bidi={this.name}\n        />\n      </div>,\n      50\n    );\n\n    items.add(\n      \"submit\",\n      <div className=\"Form-group\">\n        {Button.component(\n          {\n            type: \"submit\",\n            className: \"Button Button--primary SupportModal-save\",\n            loading: this.loading,\n          },\n          \"Update\"\n        )}\n      </div>,\n      -10\n    );\n\n    return items;\n  }\n\n  submitData() {\n    return {\n      title: this.name(),\n    };\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    this.loading = true;\n\n    // Do not save\n    if (this.attrs.onChange) {\n      this.attrs.onChange(this.name());\n      this.hide();\n\n      return;\n    }\n\n    this.article\n      .save({\n        title: this.name(),\n      })\n      .then(\n        () => {\n          this.hide();\n\n          // Redirect\n          if (this.redirect) {\n            const url = `/blog/${this.article.slug()}`;\n\n            m.route.set(url, true);\n            window.history.replaceState(null, document.title, url);\n          }\n        },\n        (response) => {\n          this.loading = false;\n          this.handleErrors(response);\n        }\n      );\n  }\n}\n","import BlogItem from \"./pages/BlogItem\";\nimport Model from \"flarum/Model\";\nimport Discussion from \"flarum/models/Discussion\";\nimport BlogOverview from \"./pages/BlogOverview\";\nimport redirector from \"./utils/redirector\";\nimport BlogMeta from \"../common/Models/BlogMeta\";\nimport extendTagOverview from \"./utils/extendTagOverview\";\nimport discussionRouting from \"./utils/discussionRouting\";\nimport BlogComposer from \"./pages/BlogComposer\";\nimport compat from \"./compat\";\nimport addSidebarNav from \"./utils/addSidebarNav\";\n\n// Register Flarum Blog\napp.initializers.add(\"v17development-flarum-blog\", (app) => {\n  app.routes.blog = { path: \"/blog\", component: BlogOverview };\n\n  app.routes.blogCategory = {\n    path: \"/blog/category/:slug\",\n    component: BlogOverview,\n  };\n\n  app.routes.blogComposer = { path: \"/blog/compose\", component: BlogComposer };\n\n  app.routes.blogArticle = { path: \"/blog/:id\", component: BlogItem };\n\n  app.routes[\"blogArticle.near\"] = {\n    path: \"/blog/:id/:near\",\n    component: BlogItem,\n  };\n\n  app.store.models.blogMeta = BlogMeta;\n\n  Discussion.prototype.blogMeta = Model.hasOne(\"blogMeta\");\n\n  // Redirect discussions/tags to their blog post/overview\n  redirector();\n\n  // Extend tag overview.\n  // Hide tags which are used as blog category\n  extendTagOverview();\n\n  // Make that blog articles have a blog route and not a discussion route\n  discussionRouting();\n\n  // Add a link to the blog to the IndexPage sidebar, if enabled.\n  addSidebarNav();\n});\n\ncompat();\n","import Page from \"flarum/components/Page\";\nimport Button from \"flarum/components/Button\";\nimport Link from \"flarum/components/Link\";\nimport BlogAuthor from \"../components/BlogItemSidebar/BlogAuthor\";\nimport RenameArticleModal from \"../components/Modals/RenameArticleModal\";\nimport TagDiscussionModal from \"flarum/tags/components/TagDiscussionModal\";\nimport BlogPostSettingsModal from \"../components/Modals/BlogPostSettingsModal\";\nimport Composer from \"../components/Composer/Composer\";\nimport LanguageDropdown from \"../components/LanguageDropdown/LanguageDropdown\";\n\nexport default class BlogComposer extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    app.setTitle(app.translator.trans(\"v17development-flarum-blog.forum.blog\"));\n\n    // User cannot write blogs\n    if (!app.forum.attribute(\"canWriteBlogPosts\")) {\n      m.route.set(app.route(\"blog\"));\n      return;\n    }\n\n    // Send history push\n    app.history.push(\"blogComposer\");\n\n    // Get languages (if enabled)\n    this.languages = app.store.all(\"discussion-languages\");\n\n    // Set body class\n    this.bodyClass = \"BlogItemPage\";\n\n    // Article data\n    this.articleLanguage = m.route.param(\"lang\")\n      ? m.route.param(\"lang\")\n      : app.translator.locale;\n    this.article = app.store.createRecord(\"discussions\");\n    this.blogMeta = null;\n\n    this.tags = [];\n\n    // Pre-select tags\n    if (m.route.param().tags) {\n      const tagList = Array.isArray(m.route.param().tags)\n        ? m.route.param().tags\n        : m.route.param().tags.split(\",\");\n\n      if (m.route.param().tags.length > 0) {\n        tagList.forEach((tagId) => {\n          const foundTag = app.store.getById(\"tags\", tagId);\n\n          if (foundTag) {\n            this.tags.push(foundTag);\n          }\n        });\n      }\n    }\n\n    this.isSaving = false;\n  }\n\n  openTagsModal(e = null) {\n    if (e) {\n      e.preventDefault();\n    }\n\n    if (this.isSaving) return;\n\n    app.modal.show(TagDiscussionModal, {\n      selectedTags: this.tags,\n      onsubmit: (tags) => {\n        this.tags = tags;\n      },\n    });\n  }\n\n  openNameArticleModal(e = null) {\n    if (e) {\n      e.preventDefault();\n    }\n\n    if (this.isSaving) return;\n\n    app.modal.show(RenameArticleModal, {\n      article: this.article,\n      onChange: (title) => {\n        this.article.pushData({\n          attributes: {\n            title,\n          },\n        });\n      },\n    });\n  }\n\n  openBlogSettings(e) {\n    e.preventDefault();\n\n    if (this.isSaving) return;\n\n    app.modal.show(BlogPostSettingsModal, {\n      meta: this.blogMeta,\n      onsubmit: (meta) => (this.blogMeta = meta),\n    });\n  }\n\n  view() {\n    const blogImage =\n      this.blogMeta && this.blogMeta.featuredImage()\n        ? `url(${this.blogMeta.featuredImage()})`\n        : null;\n\n    return (\n      <div className={\"FlarumBlogItem\"}>\n        <div className={\"container\"}>\n          <div className={\"FlarumBlog-ToolButtons\"}>\n            <Link\n              href={app.route(\"blog\")}\n              className={\"Button\"}\n              loading={this.isSaving}\n              icon={\"fas fa-angle-left\"}\n            >\n              <i class=\"icon fas fa-angle-left Button-icon\"></i>\n              <span class=\"Button-label\">\n                {app.translator.trans(\n                  \"v17development-flarum-blog.forum.return_to_overview\"\n                )}\n              </span>\n            </Link>\n          </div>\n          <div className={\"FlarumBlog-Article\"}>\n            <div className={\"FlarumBlog-Article-Container\"}>\n              <div className={\"FlarumBlog-Article-Content\"}>\n                <div\n                  className={`FlarumBlog-Article-Image FlarumBlog-default-image`}\n                  style={{\n                    backgroundImage: blogImage,\n                    cursor: \"pointer\",\n                  }}\n                  onclick={(e) => this.openBlogSettings(e)}\n                />\n\n                <div className={\"FlarumBlog-Article-Content-Edit-Button\"}>\n                  <div\n                    className={\n                      this.languages.length === 0\n                        ? \"FlarumBlog-Article-Content-Edit-Dropdown\"\n                        : \"FlarumBlog-Article-Content-EditButtons\"\n                    }\n                  >\n                    {this.languages !== null && this.languages.length >= 1 && (\n                      <LanguageDropdown\n                        selected={this.articleLanguage}\n                        onclick={(language) =>\n                          (this.articleLanguage = language)\n                        }\n                      />\n                    )}\n\n                    <Button\n                      className={\"Button\"}\n                      onclick={(e) => this.openBlogSettings(e)}\n                      icon={\"fas fa-pencil-alt\"}\n                      loading={this.isSaving}\n                    >\n                      Update blog settings\n                    </Button>\n                  </div>\n                </div>\n\n                {/* Article Categories */}\n                <div className={\"FlarumBlog-Article-Categories\"}>\n                  {this.tags.map((tag) => (\n                    <a href={\"#\"} onclick={(e) => this.openTagsModal(e)}>\n                      {tag.name()}\n                    </a>\n                  ))}\n\n                  <a href={\"#\"} onclick={(e) => this.openTagsModal(e)}>\n                    {this.tags.length === 0\n                      ? app.translator.trans(\n                          \"v17development-flarum-blog.forum.composer.select_category\"\n                        )\n                      : app.translator.trans(\n                          \"v17development-flarum-blog.forum.composer.edit_categories\"\n                        )}{\" \"}\n                    <i className={\"fas fa-edit\"} />\n                  </a>\n                </div>\n\n                <div className={\"FlarumBlog-Article-Post\"}>\n                  {/* Article name */}\n                  <h3\n                    onclick={() => this.openNameArticleModal()}\n                    style={{ cursor: \"pointer\" }}\n                  >\n                    {this.article &&\n                    this.article.title() &&\n                    this.article.title() !== \"\"\n                      ? this.article.title()\n                      : app.translator.trans(\n                          \"v17development-flarum-blog.forum.composer.no_title\"\n                        )}\n\n                    <a href={\"#\"} onclick={(e) => e.preventDefault()}>\n                      <i className={\"fas fa-edit\"} />\n                    </a>\n                  </h3>\n\n                  <div className=\"Post-body\">\n                    <Composer\n                      composer={app.composer}\n                      originalContent={\"\"}\n                      submitLabel={app.translator.trans(\n                        \"v17development-flarum-blog.forum.composer.post_article\"\n                      )}\n                      placeholder={app.translator.trans(\n                        \"v17development-flarum-blog.forum.composer.enter_message_here\"\n                      )}\n                      onsubmit={() => this.create()}\n                      disabled={this.isSaving}\n                    />\n                  </div>\n                </div>\n              </div>\n\n              <div className={\"FlarumBlog-Article-Comments\"}>\n                <h4>\n                  {app.translator.trans(\n                    \"v17development-flarum-blog.forum.comment_section.comments\"\n                  )}{\" \"}\n                  (0)\n                </h4>\n                {/* Locked */}\n\n                <div className={\"Post-body\"}>\n                  <blockquote class=\"uncited\">\n                    <div>\n                      <span\n                        className={\"fas fa-ban\"}\n                        style={{ marginRight: \"5px\" }}\n                      />{\" \"}\n                      {app.translator.trans(\n                        \"v17development-flarum-blog.forum.composer.comment_section\"\n                      )}\n                    </div>\n                  </blockquote>\n                </div>\n              </div>\n            </div>\n            <div className={\"FlarumBlog-Article-Sidebar\"}>\n              <BlogAuthor user={app.session.user} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  create() {\n    const blogTags = app.forum.attribute(\"blogTags\") || [];\n\n    // Force tags\n    if (this.tags.length === 0) {\n      this.openTagsModal();\n      return;\n    }\n\n    // Force title\n    if (!this.article.title() || this.article.title() === \"\") {\n      this.openNameArticleModal();\n      return;\n    }\n\n    // Find knowledge base tags\n    const findblogTags = this.tags.filter((tag) => {\n      return blogTags.indexOf(tag.id()) >= 0;\n    });\n\n    // No knowledge base tags selected\n    if (findblogTags.length === 0) {\n      alert(\n        app.translator.trans(\n          \"v17development-flarum-blog.forum.composer.no_blog_tags_selected\"\n        )\n      );\n      return;\n    }\n\n    if (\n      (this.blogMeta === null ||\n        !this.blogMeta.featuredImage() ||\n        !this.blogMeta.summary()) &&\n      !confirm(\n        app.translator.trans(\n          \"v17development-flarum-blog.forum.composer.post_without_blog_info\"\n        )\n      )\n    ) {\n      return;\n    }\n\n    let relationships = {\n      tags: this.tags,\n    };\n\n    // Add languages if possible\n    if (this.languages.length > 0) {\n      relationships.language = app.store.getBy(\n        \"discussion-languages\",\n        \"code\",\n        this.articleLanguage\n      );\n    }\n\n    const data = {\n      title: this.article.title(),\n      content: app.composer.fields.content(),\n      relationships,\n      blogMeta:\n        this.blogMeta !== null\n          ? {\n              featuredImage: this.blogMeta.featuredImage(),\n              summary: this.blogMeta.summary(),\n              isSized: this.blogMeta.isSized(),\n            }\n          : null,\n    };\n\n    this.isSaving = true;\n\n    this.article\n      .save(data)\n      .then((article) => {\n        setTimeout(() => {\n          // Redirect to the article\n          m.route.set(app.route(\"blogArticle\", { id: `${article.slug()}` }));\n        }, 500);\n      })\n      .catch(() => {\n        this.isSaving = false;\n        m.redraw();\n      });\n  }\n}\n","import Page from \"flarum/components/Page\";\nimport CommentPost from \"flarum/components/CommentPost\";\nimport PostStream from \"flarum/components/PostStream\";\nimport PostStreamState from \"flarum/states/PostStreamState\";\nimport BlogPostController from \"../components/BlogPostController\";\nimport BlogItemSidebar from \"../components/BlogItemSidebar/BlogItemSidebar\";\nimport Link from \"flarum/components/Link\";\nimport BlogOverview from \"./BlogOverview\";\nimport humanTime from \"flarum/helpers/humanTime\";\nimport BlogAuthor from \"../components/BlogItemSidebar/BlogAuthor\";\n\nexport default class BlogItem extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    app.setTitle(app.translator.trans(\"v17development-flarum-blog.forum.blog\"));\n\n    // Send history push\n    app.history.push(\"blogArticle\");\n\n    this.bodyClass = \"BlogItemPage\";\n\n    this.near = m.route.param(\"near\") || 0;\n\n    this.loading = true;\n    this.found = false;\n    this.article = null;\n    this.relatedArticles = [];\n\n    this.loadBlogItem();\n  }\n\n  // Load blog overview\n  loadBlogItem() {\n    const preloadBlogOverview = app.preloadedApiDocument();\n\n    if (preloadBlogOverview) {\n      // We must wrap this in a setTimeout because if we are mounting this\n      // component for the first time on page load, then any calls to m.redraw\n      // will be ineffective and thus any configs (scroll code) will be run\n      // before stuff is drawn to the page.\n      setTimeout(this.show.bind(this, preloadBlogOverview), 0);\n    } else {\n      app.store\n        .find(\"discussions\", m.route.param(\"id\").split(\"-\")[0])\n        .then(this.show.bind(this))\n        .catch(() => {\n          m.redraw();\n        });\n    }\n    m.redraw();\n  }\n  getRelatedArticles() {\n    const tags = this.article.tags().map((tag) => ` tag:${tag.slug()}`);\n    let q = `is:blog ${tags}`;\n\n    app.store\n      .find(\"discussions\", {\n        filter: {\n          q,\n        },\n        sort: \"-createdAt\",\n      })\n      .then((articles) => {\n        this.relatedArticles = [...articles]\n          .filter((relatedArticle) => relatedArticle.id() !== this.article.id())\n          .sort(() => 0.5 - Math.random())\n          .slice(0, 3);\n        m.redraw();\n      })\n      .catch((e) => {\n        console.error(\"error\", e);\n      });\n  }\n  getArticleDefaultImage(article) {\n    const defaultImage = app.forum.attribute(\"blogDefaultImage\")\n      ? `url(${\n          app.forum.attribute(\"baseUrl\") +\n          \"/assets/\" +\n          app.forum.attribute(\"blogDefaultImage\")\n        })`\n      : null;\n\n    const blogImage =\n      article.blogMeta() && article.blogMeta().featuredImage()\n        ? `url(${article.blogMeta().featuredImage()})`\n        : defaultImage;\n\n    return blogImage;\n  }\n\n  // Show blog post\n  show(article) {\n    // Set article data\n    this.article = article;\n\n    // Update title\n    app.setTitle(\n      `${article.title()} - ${app.translator.trans(\n        \"v17development-flarum-blog.forum.blog\"\n      )}`\n    );\n\n    this.loading = false;\n\n    let includedPosts = [];\n    if (article.payload && article.payload.included) {\n      const articleId = article.id();\n\n      includedPosts = article.payload.included\n        .filter(\n          (record) =>\n            record.type === \"posts\" &&\n            record.relationships &&\n            record.relationships.discussion &&\n            record.relationships.discussion.data.id === articleId\n        )\n        .map((record) => app.store.getById(\"posts\", record.id))\n        .sort((a, b) => a.id() - b.id())\n        .slice(0, 20);\n    }\n\n    this.stream = new PostStreamState(article, includedPosts);\n\n    // Scroll to specific post\n    if (this.near) {\n      this.stream.goToNumber(this.near, true);\n    }\n    this.getRelatedArticles();\n    m.redraw();\n  }\n\n  view() {\n    const defaultImage = app.forum.attribute(\"blogDefaultImage\")\n      ? `url(${\n          app.forum.attribute(\"baseUrl\") +\n          \"/assets/\" +\n          app.forum.attribute(\"blogDefaultImage\")\n        })`\n      : null;\n    const blogImage =\n      this.article &&\n      this.article.blogMeta() &&\n      this.article.blogMeta().featuredImage()\n        ? `url(${this.article.blogMeta().featuredImage()})`\n        : defaultImage;\n    let articlePost = null;\n\n    if (!this.loading && this.article) {\n      articlePost = this.article.firstPost()\n        ? this.article.firstPost()\n        : app.store.getById(\"posts\", this.article.firstPostId());\n    }\n    const canEditArticle = this.article?.user()?.id?.()\n      ? this.article?.user()?.id?.() === app.session.user?.id?.()\n      : false;\n    console.log(\"canEditArticle\");\n    return (\n      <div className={\"FlarumBlogItem\"}>\n        <div className={\"container\"}>\n          <div className={\"FlarumBlog-ToolButtons\"}>\n            <Link\n              href={app.route(\"blog\")}\n              className={\"Button\"}\n              onclick={(e) => {\n                if (app.previous.matches(BlogOverview)) {\n                  e.preventDefault();\n                  history.back();\n                }\n              }}\n            >\n              <i class=\"icon fas fa-angle-left Button-icon\"></i>\n              <span class=\"Button-label\">\n                {app.translator.trans(\n                  \"v17development-flarum-blog.forum.return_to_overview\"\n                )}\n              </span>\n            </Link>\n          </div>\n          <div className={\"FlarumBlog-Article\"}>\n            <div className={\"FlarumBlog-Article-Container\"}>\n              <div className={\"FlarumBlog-Article-Content\"}>\n                <div\n                  className={`FlarumBlog-Article-Image FlarumBlog-default-image ${\n                    this.loading ? \"FlarumBlog-Article-GhostImage\" : \"\"\n                  }`}\n                  style={{\n                    backgroundImage: blogImage,\n                    opacity:\n                      this.article && this.article.isHidden() ? 0.4 : null,\n                  }}\n                />\n\n                {(canEditArticle || app.session?.user?.canEdit?.()) &&\n                  this.article && <BlogPostController article={this.article} />}\n\n                {/* Article Categories */}\n                <div className={\"FlarumBlog-Article-Categories\"}>\n                  {!this.loading &&\n                    this.article &&\n                    this.article.tags() &&\n                    this.article\n                      .tags()\n                      .map((tag) => (\n                        <Link\n                          href={app.route(\"blogCategory\", { slug: tag.slug() })}\n                        >\n                          {tag.name()}\n                        </Link>\n                      ))}\n\n                  {this.loading &&\n                    [0, 1].map(() => (\n                      <span className={\"FlarumBlog-Article-GhostCategory\"}>\n                        Category\n                      </span>\n                    ))}\n                </div>\n\n                <div className={\"FlarumBlog-Article-Post\"}>\n                  {/* Article name */}\n                  <h3\n                    className={\n                      this.loading ? \"FlarumBlog-Article-GhostTitle\" : null\n                    }\n                  >\n                    {this.article ? this.article.title() : \"Ghost title\"}\n                    {this.article &&\n                      this.article.isHidden() &&\n                      `(${app.translator.trans(\n                        \"v17development-flarum-blog.forum.hidden\"\n                      )})`}\n                  </h3>\n\n                  {this.loading &&\n                    [0, 1, 2].map(() => (\n                      <div>\n                        <p className={\"FlarumBlog-Article-GhostParagraph\"}>\n                          &nbsp;\n                        </p>\n                        <p className={\"FlarumBlog-Article-GhostParagraph\"}>\n                          &nbsp;\n                        </p>\n                        <p className={\"FlarumBlog-Article-GhostParagraph\"}>\n                          &nbsp;\n                        </p>\n                        <p>&nbsp;</p>\n                      </div>\n                    ))}\n\n                  {!this.loading &&\n                    this.article.blogMeta() &&\n                    this.article.blogMeta().isPendingReview() == true && (\n                      <div className={\"Post\"}>\n                        <blockquote\n                          class=\"uncited\"\n                          style={{ fontSize: \"16px\" }}\n                        >\n                          <div>\n                            <span\n                              className={\"far fa-clock\"}\n                              style={{ marginRight: \"5px\" }}\n                            />{\" \"}\n                            {app.translator.trans(\n                              \"v17development-flarum-blog.forum.review_article.pending_review\"\n                            )}\n                          </div>\n                        </blockquote>\n                      </div>\n                    )}\n\n                  {!this.loading && articlePost && (\n                    <CommentPost post={articlePost} />\n                  )}\n                </div>\n              </div>\n\n              <div className={\"FlarumBlog-Article-Comments\"}>\n                <h4>\n                  {app.translator.trans(\n                    \"v17development-flarum-blog.forum.comment_section.comments\"\n                  )}{\" \"}\n                  ({this.article ? this.article.commentCount() - 1 : 0})\n                </h4>\n                {/* Locked */}\n                {!this.loading &&\n                  this.article.isLocked &&\n                  this.article.isLocked() && (\n                    <div className={\"Post-body\"}>\n                      <blockquote class=\"uncited\">\n                        <div>\n                          <span\n                            className={\"far fa-lock\"}\n                            style={{ marginRight: \"5px\" }}\n                          />{\" \"}\n                          {app.translator.trans(\n                            \"v17development-flarum-blog.forum.comment_section.locked\"\n                          )}\n                        </div>\n                      </blockquote>\n                    </div>\n                  )}\n\n                {!this.loading &&\n                  this.article &&\n                  PostStream.component({\n                    discussion: this.article,\n                    stream: this.stream,\n                    onPositionChange: this.positionChanged.bind(this),\n                  })}\n              </div>\n            </div>\n\n            <BlogItemSidebar\n              className=\"hidden-phone\"\n              article={this.article}\n              loading={this.loading}\n            />\n            <div className=\"FlarumBlog-Article-Sidebar hidden-desktop\">\n              <BlogAuthor article={this.article} loading={this.loading} />\n            </div>\n          </div>\n          <br />\n          <br />\n          {this.relatedArticles.length ? (\n            <div className=\"BlogRelated\">\n              <h2>Related Articles</h2>\n              <div className={\"BlogRelated-list\"}>\n                {this.relatedArticles.length >= 0 &&\n                  this.relatedArticles.map((article) => {\n                    const blogImage =\n                      article.blogMeta() && article.blogMeta().featuredImage()\n                        ? `url(${article.blogMeta().featuredImage()})`\n                        : defaultImage;\n                    const blogTag = article.tags()\n                      ? article.tags().filter((tag) => tag.isChild())\n                      : [];\n\n                    return (\n                      <Link\n                        href={app.route(\"blogArticle\", {\n                          id: `${article.slug()}`,\n                        })}\n                        className={\n                          \"BlogRelated-list-item FlarumBlog-Featured-default-image\"\n                        }\n                        style={{ backgroundImage: blogImage }}\n                      >\n                        <div className={\"BlogRelated-list-item-top\"}>\n                          {blogTag[0] && <span>{blogTag[0].name()}</span>}\n                          {article.isSticky() && (\n                            <span>\n                              <i className={\"fas fa-thumbtack\"} />\n                            </span>\n                          )}\n                          {((article.blogMeta() &&\n                            article.blogMeta().isPendingReview() == true) ||\n                            article.isHidden()) && (\n                            <span>\n                              <i className={\"fas fa-eye-slash\"} />\n                            </span>\n                          )}\n                          {article.blogMeta() &&\n                            article.blogMeta().isPendingReview() == true && (\n                              <span\n                                title={app.translator.trans(\n                                  \"v17development-flarum-blog.forum.review_article.pending_review\"\n                                )}\n                                config={tooltip.bind(this)}\n                                data-placement={\"bottom\"}\n                              >\n                                <i className={\"far fa-clock\"} />{\" \"}\n                                {app.translator.trans(\n                                  \"v17development-flarum-blog.forum.review_article.pending_review_title\"\n                                )}\n                              </span>\n                            )}\n                        </div>\n\n                        <div className={\"BlogRelated-list-item-details\"}>\n                          <h4>{article.title()}</h4>\n\n                          <div className={\"data\"}>\n                            <span>\n                              <i className={\"far fa-clock\"} />{\" \"}\n                              {humanTime(article.createdAt())}\n                            </span>\n                            <span>\n                              <i className={\"far fa-user\"} />{\" \"}\n                              {article.user()\n                                ? article.user().displayName()\n                                : \"[Deleted]\"}\n                            </span>\n                            <span>\n                              <i className={\"far fa-comment\"} />{\" \"}\n                              {article.commentCount() - 1}\n                            </span>\n                          </div>\n                        </div>\n                      </Link>\n                    );\n                  })}\n              </div>\n            </div>\n          ) : null}\n        </div>\n      </div>\n    );\n  }\n\n  positionChanged(startNumber, endNumber) {\n    const article = this.article;\n\n    if (app.session.user && endNumber > (article.lastReadPostNumber() || 0)) {\n      article.save({ lastReadPostNumber: endNumber });\n      m.redraw();\n    }\n  }\n}\n","import Page from \"flarum/components/Page\";\nimport Button from \"flarum/components/Button\";\nimport humanTime from \"flarum/helpers/humanTime\";\nimport BlogCategories from \"../components/BlogCategories\";\nimport Link from \"flarum/components/Link\";\nimport tooltip from \"../utils/tooltip\";\nimport LanguageDropdown from \"../components/LanguageDropdown/LanguageDropdown\";\nimport ForumNav from \"../components/ForumNav\";\n\nexport default class BlogOverview extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    app.setTitle(app.translator.trans(\"v17development-flarum-blog.forum.blog\"));\n\n    this.bodyClass = \"BlogOverviewPage\";\n\n    this.isLoading = true;\n    this.featuredPosts = [];\n    this.posts = [];\n    this.hasMore = null;\n    this.isLoadingMore = false;\n\n    this.languages = app.store.all(\"discussion-languages\");\n\n    this.currentSelectedLanguage = m.route.param(\"lang\")\n      ? m.route.param(\"lang\")\n      : app.translator.locale;\n\n    // Send history push\n    app.history.push(\"blog\");\n\n    this.loadBlogOverview();\n  }\n\n  // Load blog overview\n  loadBlogOverview() {\n    const preloadBlogOverview = app.preloadedApiDocument();\n\n    if (preloadBlogOverview) {\n      // We must wrap this in a setTimeout because if we are mounting this\n      // component for the first time on page load, then any calls to m.redraw\n      // will be ineffective and thus any configs (scroll code) will be run\n      // before stuff is drawn to the page.\n      setTimeout(this.show.bind(this, preloadBlogOverview), 0);\n    } else {\n      this.reloadData();\n    }\n\n    m.redraw();\n  }\n\n  reloadData() {\n    let q = `is:blog${\n      m.route.param(\"slug\") ? ` tag:${m.route.param(\"slug\")}` : \"\"\n    }`;\n\n    if (this.languages !== null && this.languages.length >= 1) {\n      q += ` language:${this.currentSelectedLanguage}`;\n    }\n\n    app.store\n      .find(\"discussions\", {\n        filter: {\n          q,\n        },\n        sort: \"-createdAt\",\n      })\n      .then(this.show.bind(this))\n      .catch(() => {\n        m.redraw();\n      });\n  }\n\n  // Show blog posts\n  show(articles) {\n    if (articles.length === 0) {\n      this.isLoading = false;\n      m.redraw();\n\n      return;\n    }\n\n    // Set pagination\n    this.hasMore =\n      articles.payload.links && articles.payload.links.next\n        ? articles.payload.links.next\n        : null;\n\n    this.featuredPosts = articles.slice(0, 3);\n    this.posts = articles.length >= 4 ? articles.slice(3, articles.length) : [];\n\n    this.isLoading = false;\n\n    m.redraw();\n  }\n\n  // Load more blog posts\n  loadMore() {\n    this.isLoadingMore = true;\n\n    app.store\n      .find(this.hasMore.replace(app.forum.attribute(\"apiUrl\"), \"\"))\n      .then((data) => {\n        data.map((article) => this.posts.push(article));\n\n        // Update hasmore button\n        this.hasMore =\n          data.payload.links && data.payload.links.next\n            ? data.payload.links.next\n            : null;\n      })\n      .catch(() => {})\n      .then(() => {\n        this.isLoadingMore = false;\n        m.redraw();\n      });\n  }\n\n  title() {\n    if (!m.route.param(\"slug\")) {\n      return (\n        <h2>\n          {app.translator.trans(\n            \"v17development-flarum-blog.forum.recent_posts\"\n          )}\n        </h2>\n      );\n    }\n\n    const tag = app.store\n      .all(\"tags\")\n      .filter((tag) => tag.slug() === m.route.param(\"slug\"));\n\n    return (\n      <h2>\n        {tag && tag[0] && tag[0].name()}\n        <small>\n          {\" \"}\n          -{\" \"}\n          <Link href={app.route(\"blog\")}>\n            {app.translator.trans(\n              \"v17development-flarum-blog.forum.return_to_overview\"\n            )}\n          </Link>\n        </small>\n      </h2>\n    );\n  }\n\n  view() {\n    const defaultImage = app.forum.attribute(\"blogDefaultImage\")\n      ? `url(${\n          app.forum.attribute(\"baseUrl\") +\n          \"/assets/\" +\n          app.forum.attribute(\"blogDefaultImage\")\n        })`\n      : null;\n\n    return (\n      <div className={\"FlarumBlogOverview\"}>\n        <div className={\"container\"}>\n          <div className={\"BlogFeatured\"}>\n            <div className={\"BlogOverviewButtons\"}>\n              {app.forum.attribute(\"canWriteBlogPosts\") && (\n                <Button\n                  className={\"Button\"}\n                  onclick={() => this.newArticle()}\n                  icon={\"fas fa-pencil-alt\"}\n                >\n                  {app.translator.trans(\n                    \"v17development-flarum-blog.forum.compose.write_article\"\n                  )}\n                </Button>\n              )}\n\n              {this.languages !== null && this.languages.length >= 1 && (\n                <LanguageDropdown\n                  selected={this.currentSelectedLanguage}\n                  onclick={(language) => {\n                    this.currentSelectedLanguage = language;\n\n                    m.route.set(document.location.pathname, {\n                      lang: language,\n                    });\n\n                    this.reloadData();\n                  }}\n                />\n              )}\n            </div>\n\n            {this.title()}\n\n            <div style={{ clear: \"both\" }} />\n\n            <div className={\"BlogFeatured-list\"}>\n              {/* Ghost data */}\n              {this.isLoading &&\n                [0, 1, 2].map(() => (\n                  <div\n                    className={\n                      \"BlogFeatured-list-item BlogFeatured-list-item-ghost\"\n                    }\n                  >\n                    <div className={\"BlogFeatured-list-item-details\"}>\n                      <h4>&nbsp;</h4>\n\n                      <div className={\"data\"}>\n                        <span>\n                          <i className={\"far fa-wave\"} />\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n\n              {!this.isLoading &&\n                this.featuredPosts.length >= 0 &&\n                this.featuredPosts.map((article) => {\n                  const blogImage =\n                    article.blogMeta() && article.blogMeta().featuredImage()\n                      ? `url(${article.blogMeta().featuredImage()})`\n                      : defaultImage;\n                  const blogTag = article.tags()\n                    ? article.tags().filter((tag) => tag.isChild())\n                    : [];\n\n                  return (\n                    <Link\n                      href={app.route(\"blogArticle\", {\n                        id: `${article.slug()}`,\n                      })}\n                      className={\n                        \"BlogFeatured-list-item FlarumBlog-default-image\"\n                      }\n                      style={{ backgroundImage: blogImage }}\n                    >\n                      <div className={\"BlogFeatured-list-item-top\"}>\n                        {blogTag[0] && <span>{blogTag[0].name()}</span>}\n                        {article.isSticky() && (\n                          <span>\n                            <i className={\"fas fa-thumbtack\"} />\n                          </span>\n                        )}\n                        {((article.blogMeta() &&\n                          article.blogMeta().isPendingReview() == true) ||\n                          article.isHidden()) && (\n                          <span>\n                            <i className={\"fas fa-eye-slash\"} />\n                          </span>\n                        )}\n                        {article.blogMeta() &&\n                          article.blogMeta().isPendingReview() == true && (\n                            <span\n                              title={app.translator.trans(\n                                \"v17development-flarum-blog.forum.review_article.pending_review\"\n                              )}\n                              config={tooltip.bind(this)}\n                              data-placement={\"bottom\"}\n                            >\n                              <i className={\"far fa-clock\"} />{\" \"}\n                              {app.translator.trans(\n                                \"v17development-flarum-blog.forum.review_article.pending_review_title\"\n                              )}\n                            </span>\n                          )}\n                      </div>\n\n                      <div className={\"BlogFeatured-list-item-details\"}>\n                        <h4>{article.title()}</h4>\n\n                        <div className={\"data\"}>\n                          <span>\n                            <i className={\"far fa-clock\"} />{\" \"}\n                            {humanTime(article.createdAt())}\n                          </span>\n                          <span>\n                            <i className={\"far fa-user\"} />{\" \"}\n                            {article.user()\n                              ? article.user().displayName()\n                              : \"[Deleted]\"}\n                          </span>\n                          <span>\n                            <i className={\"far fa-comment\"} />{\" \"}\n                            {article.commentCount() - 1}\n                          </span>\n                        </div>\n                      </div>\n                    </Link>\n                  );\n                })}\n            </div>\n          </div>\n\n          <div className={\"BlogScrubber\"}>\n            <div className={\"BlogList\"}>\n              {this.isLoading &&\n                [false, false, true, false].map((state) => {\n                  return (\n                    <div\n                      className={`BlogList-item BlogList-item-${\n                        state === true ? \"sized\" : \"default\"\n                      } BlogList-item-ghost`}\n                    >\n                      <div\n                        className={\n                          \"BlogList-item-photo FlarumBlog-default-image\"\n                        }\n                      ></div>\n                      <div className={\"BlogList-item-content\"}>\n                        <h4>&nbsp;</h4>\n                        <p>&nbsp;</p>\n\n                        <div className={\"data\"}>\n                          <span>\n                            <i className={\"far fa-wave\"} />\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })}\n\n              {!this.isLoading &&\n                this.posts.length >= 1 &&\n                this.posts.map((article) => {\n                  const blogImage =\n                    article.blogMeta() && article.blogMeta().featuredImage()\n                      ? `url(${article.blogMeta().featuredImage()})`\n                      : defaultImage;\n                  const isSized =\n                    article.blogMeta() && article.blogMeta().isSized();\n                  const summary =\n                    article.blogMeta() && article.blogMeta().summary()\n                      ? article.blogMeta().summary()\n                      : \"\";\n\n                  return (\n                    <Link\n                      href={app.route(\"blogArticle\", {\n                        id: `${article.slug()}`,\n                      })}\n                      className={`BlogList-item BlogList-item-${\n                        isSized ? \"sized\" : \"default\"\n                      }`}\n                    >\n                      <div\n                        className={\n                          \"BlogList-item-photo FlarumBlog-default-image\"\n                        }\n                        style={{ backgroundImage: blogImage }}\n                      ></div>\n                      <div className={\"BlogList-item-content\"}>\n                        <h4>\n                          {article.title()}\n                          {((article.blogMeta() &&\n                            article.blogMeta().isPendingReview() == true) ||\n                            article.isHidden()) && (\n                            <i className={\"fas fa-eye-slash\"} />\n                          )}\n                          {article.blogMeta() &&\n                            article.blogMeta().isPendingReview() == true && (\n                              <i\n                                className={\"far fa-clock\"}\n                                title={app.translator.trans(\n                                  \"v17development-flarum-blog.forum.review_article.pending_review\"\n                                )}\n                                config={tooltip.bind(this)}\n                              />\n                            )}\n                        </h4>\n                        <p>{summary}</p>\n\n                        <div className={\"data\"}>\n                          <span>\n                            <i className={\"far fa-clock\"} />{\" \"}\n                            {humanTime(article.createdAt())}\n                          </span>\n                          <span>\n                            <i className={\"far fa-user\"} />{\" \"}\n                            {article.user()\n                              ? article.user().displayName()\n                              : \"[Deleted]\"}\n                          </span>\n                          <span>\n                            <i className={\"far fa-comment\"} />{\" \"}\n                            {article.commentCount() - 1}\n                          </span>\n                        </div>\n                      </div>\n                    </Link>\n                  );\n                })}\n\n              {!this.isLoading &&\n                this.featuredPosts.length > 0 &&\n                this.hasMore === null && (\n                  <p className={\"FlarumBlog-reached-end\"}>\n                    {app.translator.trans(\n                      \"v17development-flarum-blog.forum.no_more_posts\"\n                    )}\n                  </p>\n                )}\n\n              {!this.isLoading &&\n                this.featuredPosts.length === 0 &&\n                this.posts.length === 0 && (\n                  <p className={\"FlarumBlog-reached-end\"}>\n                    {app.translator.trans(\n                      \"v17development-flarum-blog.forum.category_empty\"\n                    )}\n                  </p>\n                )}\n\n              {!this.isLoading && this.hasMore !== null && (\n                <div className={\"FlarumBlog-reached-load-more\"}>\n                  <Button\n                    className={\"Button\"}\n                    onclick={() => this.loadMore()}\n                    icon={\"fas fa-chevron-down\"}\n                    loading={this.isLoadingMore}\n                  >\n                    {app.translator.trans(\n                      \"core.forum.discussion_list.load_more_button\"\n                    )}\n                  </Button>\n                </div>\n              )}\n            </div>\n\n            <div className={\"Sidebar\"}>\n              <BlogCategories />\n              <ForumNav />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  newArticle() {\n    let foundMainTag = false;\n    let tags = [];\n\n    const blogTags = app.forum.attribute(\"blogTags\");\n\n    // Pre-select selected tags\n    app.store.all(\"tags\").forEach((_tag) => {\n      // Find main blog tag\n      if (\n        !foundMainTag &&\n        !_tag.isChild() &&\n        blogTags.indexOf(_tag.id()) >= 0\n      ) {\n        tags.push(_tag);\n      }\n    });\n\n    // Get current category\n    const currentCategory = app.store.getBy(\n      \"tags\",\n      \"slug\",\n      m.route.param(\"slug\")\n    );\n\n    if (currentCategory) {\n      tags.push(currentCategory);\n    }\n\n    // Redirect to the composer\n    m.route.set(\n      app.route(\"blogComposer\", {\n        tags: tags.map((tag) => tag.id()).join(),\n        lang:\n          this.languages.length > 0 ? this.currentSelectedLanguage : undefined,\n      })\n    );\n  }\n}\n","import { extend } from \"flarum/extend\";\nimport IndexPage from \"flarum/components/IndexPage\";\nimport LinkButton from \"flarum/components/LinkButton\";\n\nexport default function addSidebarNav() {\n  extend(IndexPage.prototype, \"navItems\", function (items) {\n    if (\n      app.forum.attribute(\"blogAddSidebarNav\") &&\n      app.forum.attribute(\"blogAddSidebarNav\") !== \"0\"\n    ) {\n      items.add(\n        \"blog\",\n        <LinkButton icon=\"fas fa-comment\" href={app.route(\"blog\")}>\n          {app.translator.trans(\"v17development-flarum-blog.forum.blog\")}\n        </LinkButton>,\n        15\n      );\n    }\n\n    return items;\n  });\n}\n","export default function () {\n  // Save the original function before we override it\n  const original_discussion_route = app.route.discussion;\n\n  /**\n   * Generate a URL to a discussion OR a Blog Article.\n   *\n   * CORE_CODE_OVERRIDE: This overrides the standard function from flarum/core.\n   * The code is inspired from js/src/forum/routes.js and now handles different types of discussions.\n   * It will try to keep the original function executed if the discussion being\n   * processed isn't a blog article.\n   *\n   * @param {Discussion} discussion\n   * @param {Integer} [near]\n   * @return {String}\n   */\n  app.route.discussion = (discussion, near) => {\n    const discussionRedirectEnabled =\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"both\" ||\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"discussions_only\";\n    let shouldRedirect = false;\n    if (discussionRedirectEnabled && discussion.tags().length > 0) {\n      const blogTags = app.forum.attribute(\"blogTags\");\n\n      const foundTags = discussion.tags().filter((tag) => {\n        return (\n          blogTags.indexOf(tag.id()) >= 0 ||\n          (tag.parent() && blogTags.indexOf(tag.parent().id()) >= 0)\n        );\n      });\n\n      if (foundTags.length > 0) {\n        shouldRedirect = true;\n      }\n    }\n    if (shouldRedirect) {\n      return discussion.lastReadPostNumber() > 1\n        ? app.route(\"blogArticle.near\", {\n            id: discussion.slug(),\n            near: discussion.lastReadPostNumber(),\n          })\n        : app.route(\"blogArticle\", {\n            id: discussion.slug(),\n          });\n    } else {\n      return original_discussion_route(discussion, near);\n    }\n  };\n}\n","import { extend } from \"flarum/extend\";\nimport IndexPage from \"flarum/components/IndexPage\";\nimport TagsPage from \"flarum/tags/components/TagsPage\";\n\nexport default function extendTagOverview() {\n  extend(TagsPage.prototype, \"view\", function (markup) {\n    if (app.forum.attribute(\"blogHideTags\") == false) return markup;\n\n    // Get knowledge base tag ID's\n    const knowledgeBaseTags = app.forum.attribute(\"blogTags\") || [];\n\n    // Get tiles\n    let tag_tiles = markup.children[1].children[1].children[0].children;\n\n    // Map through the tiles and remove tiles that are part of the knowledge base\n    markup.children[1].children[1].children[0].children = tag_tiles.map(\n      (tile, i) => {\n        return knowledgeBaseTags.indexOf(this.tags[i].id()) >= 0 ? null : tile;\n      }\n    );\n\n    return markup;\n  });\n\n  extend(IndexPage.prototype, \"navItems\", function (items) {\n    if (app.forum.attribute(\"blogHideTags\") == false) return items;\n\n    const blogTags = app.forum.attribute(\"blogTags\") || [];\n\n    blogTags.forEach((id) => {\n      items.remove(`tag${id}`);\n    });\n\n    return items;\n  });\n}\n","import IndexPage from \"flarum/components/IndexPage\";\nimport DiscussionPage from \"flarum/components/DiscussionPage\";\nimport { extend, override } from \"flarum/extend\";\n\nexport default function () {\n  // Redirect tag to blog category\n  extend(IndexPage.prototype, \"oncreate\", function () {\n    const tag = this.currentTag();\n    const tagRedirectEnabled =\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"both\" ||\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"tags_only\";\n\n    // Only trigger when it's a tag page and the redirects are enabled\n    if (tag && tagRedirectEnabled) {\n      const blogTags = app.forum.attribute(\"blogTags\");\n\n      // Tag is inside list\n      if (\n        blogTags.indexOf(tag.id()) >= 0 ||\n        (tag.parent() && blogTags.indexOf(tag.parent().id()) >= 0)\n      ) {\n        m.route.set(app.route(\"blog\"));\n      }\n    }\n  });\n\n  // Redirect discussion to blog article\n  override(DiscussionPage.prototype, \"show\", function (original, discussion) {\n    const discussionRedirectEnabled =\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"both\" ||\n      app.forum.attribute(\"blogRedirectsEnabled\") === \"discussions_only\";\n\n    if (\n      discussionRedirectEnabled &&\n      discussion &&\n      discussion &&\n      discussion.tags().length > 0\n    ) {\n      const blogTags = app.forum.attribute(\"blogTags\");\n\n      const foundTags = discussion.tags().filter((tag) => {\n        return (\n          blogTags.indexOf(tag.id()) >= 0 ||\n          (tag.parent() && blogTags.indexOf(tag.parent().id()) >= 0)\n        );\n      });\n\n      // Only redirect if the discussion has blog tags\n      if (foundTags.length > 0) {\n        // Redirect to blog article\n        const url = app.route(\"blogArticle\", {\n          id: discussion.slug(),\n        });\n\n        // Setting the 3rd argument to true replaces the current state in the browser history, that way the browser back button works as expected.\n        m.route.set(url, null, true);\n        return null;\n      }\n    }\n\n    return original(discussion);\n  });\n}\n","export default function tooltip(element) {\n  $(element).tooltip();\n}\n","module.exports = flarum.core;","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['components/Alert'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/CommentPost'];","module.exports = flarum.core.compat['components/ComposerBody'];","module.exports = flarum.core.compat['components/DiscussionPage'];","module.exports = flarum.core.compat['components/Dropdown'];","module.exports = flarum.core.compat['components/EditPostComposer'];","module.exports = flarum.core.compat['components/IndexPage'];","module.exports = flarum.core.compat['components/Link'];","module.exports = flarum.core.compat['components/LinkButton'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/PostStream'];","module.exports = flarum.core.compat['components/SelectDropdown'];","module.exports = flarum.core.compat['components/Switch'];","module.exports = flarum.core.compat['components/TextEditor'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['helpers/humanTime'];","module.exports = flarum.core.compat['helpers/listItems'];","module.exports = flarum.core.compat['models/Discussion'];","module.exports = flarum.core.compat['states/PostStreamState'];","module.exports = flarum.core.compat['tags/components/TagDiscussionModal'];","module.exports = flarum.core.compat['tags/components/TagsPage'];","module.exports = flarum.core.compat['utils/DiscussionControls'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/Stream'];","module.exports = flarum.core.compat['utils/extractText'];","module.exports = flarum.core.compat['utils/mixin'];"],"sourceRoot":""}